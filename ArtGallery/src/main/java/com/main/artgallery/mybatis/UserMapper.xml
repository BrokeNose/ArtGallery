<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user">
	<select id="getList" resultType="userDto">
		SELECT id, email, roll, regdate, deldate
		FROM T_User
		<where>
			<if test="id !=null">
				OR id LIKE '%'||#{id}||'%'
			</if>
			<if test="email !=null">
				OR email LIKE '%'||#{email}||'%'
			</if>
		</where>
	</select>
	<insert id="insert" parameterType="userDto">
  		INSERT INTO T_User 
		(id, pwd, email, roll, regdate) 
		VALUES(#{id}, #{pwd}, #{email}, #{roll}, SYSDATE)
	</insert>
	<select id="getData" parameterType="string" resultType="userDto">
		SELECT id, pwd, email, roll, regdate, deldate 
  		FROM T_User 
  		WHERE id=#{id}
	</select>
	<update id="update" parameterType="userDto">
		UPDATE T_User 
		SET email=#{email}, roll=#{roll}
		WHERE id=#{id}
	</update>
  <update id="changePwd" parameterType="userDto">
  	UPDATE T_User 
  	SET pwd=#{pwd} 
  	WHERE id=#{id}
  </update>
  <delete id="delete" parameterType="string">
  	UPDATE T_User
  	SET deldate=SYSDATE
  	WHERE id=#{id}
  </delete>
  <select id="isExist" parameterType="string" resultType="string">
  	SELECT id 
  	FROM T_User 
  	WHERE id=#{id}
  </select>
</mapper>